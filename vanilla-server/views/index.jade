doctype html
script(src="https://cdn.jsdelivr.net/sockjs/1/sockjs.min.js")
script(src="https://code.jquery.com/jquery-3.1.1.min.js")
script(type="text/javascript").
    var sock = new SockJS('http://0.0.0.0:9999/echo');

    sock.onopen = function() {
        console.log('open');
        sock.send('hello ricardo');
    };
    sock.onmessage = function(e) {
        console.log('message', e.data);
    };
    sock.onclose = function() {
        console.log('close');
        sock.close();
    };


    $(function() {
        $('input[name=msg-input').keypress(function (event) {
            if(event.which == 13) {
                sock.send($('input[name=msg-input]').val());
                $('input[name=msg-input]').val('');
            }
        });


        $('input[name=exit]').click(function (event) {
            sock.close();
        });
    });


    </script>

input(type='text', name='msg-input')
input(type='button', name='exit', value='exit')
